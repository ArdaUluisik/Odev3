<?xml version="1.0" encoding="utf-8" ?>
<ContentPage xmlns="http://schemas.microsoft.com/dotnet/2021/maui"
             xmlns:x="http://schemas.microsoft.com/winfx/2009/xaml"
             x:Class="Odev3.Views.HavaDurumuPage"
             Title="5 Günlük Tahmin"
             BackgroundColor="{AppThemeBinding Light=#F5F5F5, Dark=#121212}">

    <Grid RowDefinitions="Auto, Auto, *">

        <Frame Grid.Row="0"
               Margin="10"
               Padding="15"
               CornerRadius="15"
               HasShadow="True"
               BorderColor="{AppThemeBinding Light=#DDDDDD, Dark=#333333}"
               BackgroundColor="{AppThemeBinding Light=White, Dark=#1E1E1E}">

            <VerticalStackLayout Spacing="10">
                <Label Text="Şehir Ekle (Otomatik Bulur)"
                       FontAttributes="Bold"
                       FontSize="16"
                       TextColor="{AppThemeBinding Light=#1565C0, Dark=#4682B4}"/>

                <Grid ColumnDefinitions="*, Auto" ColumnSpacing="10">
                    <Entry x:Name="entSehirAdi"
                           Grid.Column="0"
                           Placeholder="Şehir Adı Yazın (Örn: Sivas)"
                           PlaceholderColor="{AppThemeBinding Light=#999999, Dark=#666666}"
                           TextColor="{AppThemeBinding Light=Black, Dark=White}"
                           ClearButtonVisibility="WhileEditing"/>

                    <Button Text="Bul ve Ekle"
                            Grid.Column="1"
                            Clicked="BtnEkle_Clicked"
                            BackgroundColor="{AppThemeBinding Light=#1565C0, Dark=#4682B4}"
                            TextColor="White"
                            FontAttributes="Bold"/>
                </Grid>

                <Label x:Name="lblDurumMesaji"
                       FontSize="12"
                       IsVisible="False"
                       TextColor="{AppThemeBinding Light=#555555, Dark=#AAAAAA}"/>

                <Label x:Name="lblDosyaYolu"
                       IsVisible="False"/>
            </VerticalStackLayout>
        </Frame>

        <VerticalStackLayout Grid.Row="1"
                             Padding="20,0,20,10"
                             Spacing="10">

            <Label Text="Kayıtlı Şehirler"
                   FontAttributes="Bold"
                   TextColor="{AppThemeBinding Light=#1565C0, Dark=#4682B4}"/>

            <Frame CornerRadius="10"
                   Padding="0"
                   HeightRequest="60"
                   BorderColor="{AppThemeBinding Light=#1565C0, Dark=#4682B4}"
                   BackgroundColor="{AppThemeBinding Light=White, Dark=#1E1E1E}">

                <Picker x:Name="pckSehirler"
                        Title="Listeden Seçiniz"
                        TitleColor="{AppThemeBinding Light=#888888, Dark=#888888}"
                        TextColor="{AppThemeBinding Light=Black, Dark=White}"
                        HorizontalTextAlignment="Center"
                        FontSize="16"
                        SelectedIndexChanged="PckSehirler_SelectedIndexChanged"/>
            </Frame>
        </VerticalStackLayout>

        <CollectionView x:Name="cvHavaDurumu"
                        Grid.Row="2"
                        Margin="10">

            <CollectionView.ItemsLayout>
                <LinearItemsLayout Orientation="Vertical" ItemSpacing="10"/>
            </CollectionView.ItemsLayout>

            <CollectionView.ItemTemplate>
                <DataTemplate>
                    <Frame CornerRadius="15"
                           Padding="10"
                           HasShadow="True"
                           BorderColor="{AppThemeBinding Light=#DDDDDD, Dark=#333333}"
                           BackgroundColor="{AppThemeBinding Light=White, Dark=#1E1E1E}">

                        <Grid ColumnDefinitions="60, *, Auto" Padding="5">

                            <Image Grid.Column="0"
                                   Source="{Binding Resim}"
                                   HeightRequest="50"
                                   WidthRequest="50"/>

                            <VerticalStackLayout Grid.Column="1"
                                                 VerticalOptions="Center"
                                                 Padding="10,0,0,0">
                                <Label Text="{Binding GunIsmi}"
                                       FontAttributes="Bold"
                                       FontSize="18"
                                       TextColor="{AppThemeBinding Light=Black, Dark=White}"/>

                                <Label Text="{Binding Durum}"
                                       FontSize="12"
                                       TextColor="{AppThemeBinding Light=#666666, Dark=#AAAAAA}"/>
                            </VerticalStackLayout>

                            <Frame Grid.Column="2"
                                   Padding="10,5"
                                   CornerRadius="10"
                                   VerticalOptions="Center"
                                   BorderColor="{AppThemeBinding Light=#DDDDDD, Dark=#333333}"
                                   BackgroundColor="{AppThemeBinding Light=#E3F2FD, Dark=#2D2D2D}">

                                <Label Text="{Binding Sicaklik}"
                                       FontAttributes="Bold"
                                       FontSize="16"
                                       TextColor="{AppThemeBinding Light=#0277BD, Dark=#4DD0E1}"/>
                            </Frame>

                        </Grid>
                    </Frame>
                </DataTemplate>
            </CollectionView.ItemTemplate>
        </CollectionView>

        <ActivityIndicator x:Name="loading"
                           Grid.Row="2"
                           IsRunning="False"
                           IsVisible="False"
                           Color="{AppThemeBinding Light=#1565C0, Dark=#4682B4}"
                           VerticalOptions="Center"
                           HorizontalOptions="Center"/>
    </Grid>
</ContentPage>
